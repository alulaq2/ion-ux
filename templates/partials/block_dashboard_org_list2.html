<div class="select_all">
	<input class="checkAllFacilities" type="checkbox"/> Select All
</div>
<form id="facilityForm">
<div class="list_facilities">
	
		<% _.each(resources, function(resource) { %>
            <input type="checkbox" value="<%= resource._id %>" name="<%= resource.name %>"><div class="resourceLink" data-id="<%= resource._id %>"> <%= resource.name %></div><br/>
        <% }) %>
    
</div>
</form>

<script>
    $(function(){
        $(".list_facilities .resourceLink").click(function(){
            var resource_id = $(this).attr('data-id');
            var url = "/Org/face/"+resource_id+"/";
            IONUX.ROUTER.navigate('');
            IONUX.ROUTER.navigate(url, {trigger:true});
            $('#mapButtonHidden').click();
        });

        $('.list_facilities input[type="checkbox"]').each(function(index) {
            $(this).on('click', function(e) {
            var checked_val = $(this).attr('name');
            if ($(this).is(':checked')) {
                numDataTypes++;
                var numFilters = $('.filter-add').length;
                $('.booleanInput').eq(numFilters-1).val(checked_val);
                $('.filter-add').eq(numFilters-1).click();
            }
            else {
                numDataTypes--;
                var inputList = [];
                $('.booleanInput').each(function(item) {
                    inputList.push($(this).val());
                });
                for (var i=0; i<inputList.length; i++) {
                    if ($(this).attr('name') == inputList[i]) {
                        $('.filter-remove').eq(i).click();
                    }
                }
            }
        });
    });
    });
</script>